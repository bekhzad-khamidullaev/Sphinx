{% load widget_tweaks i18n static %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE|default:"ru" }}" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="{% translate "Sphinx - Вход в систему" %}">
    <link rel="shortcut icon" href="{% static 'img/fav.png' %}" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="{% static 'css/dist/styles.css' %}" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js" defer></script>
    <script src="{% static 'js/main.js' %}" defer></script>
    <title>{% translate "Вход" %} | Sphinx</title>
</head>
<body class="h-full flex flex-col items-center justify-center bg-gray-100 px-4 py-12 sm:px-6 lg:px-8 antialiased">
    <div id="preloader" class="fixed inset-0 w-full h-full bg-white/95 flex items-center justify-center z-[9999] transition-opacity duration-300">
        <div class="w-12 h-12 border-4 border-gray-200 border-l-blue-600 rounded-full animate-spin"></div>
    </div>
    <div class="max-w-md w-full space-y-6 bg-white p-6 sm:p-8 md:p-10 rounded-xl shadow-2xl border border-gray-200">
        <div>
            <img class="mx-auto h-12 w-auto" src="{% static 'img/logo.png' %}" alt="{% translate "Sphinx Логотип" %}">
            <h2 class="mt-6 text-center text-3xl font-bold text-gray-900">
                {% translate "Вход в аккаунт" %}
            </h2>
        </div>
         {% if messages %}
             {% for message in messages %}
                 <div role="alert" class="p-3 rounded-md text-sm
                 {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %} bg-green-50 border border-green-300 text-green-700 {% endif %}
                 {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %} bg-red-50 border border-red-300 text-red-700 {% endif %}
                 {% if message.level == DEFAULT_MESSAGE_LEVELS.WARNING %} bg-yellow-50 border border-yellow-300 text-yellow-700 {% endif %}
                 {% if message.level == DEFAULT_MESSAGE_LEVELS.INFO %} bg-blue-50 border border-blue-300 text-blue-700 {% endif %}">
                     {{ message }}
                 </div>
             {% endfor %}
         {% endif %}
         {% if form.non_field_errors %}
         <div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-md text-sm" role="alert">
             {% for error in form.non_field_errors %}
                 <p>{{ error }}</p>
             {% endfor %}
         </div>
         {% endif %}
        <form class="mt-8 space-y-6" action="{% url 'user_profiles:base_login' %}" method="post">
             {% csrf_token %}
             <input type="hidden" name="next" value="{{ next|default:request.GET.next|default:'/' }}">
             <div>
                 <label for="{{ form.username.id_for_label }}" class="block text-sm font-medium text-gray-700">
                     {{ form.username.label }}
                 </label>
                 <div class="mt-1">
                     {% render_field form.username class+="form-input block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" required="True" autocomplete="username" %}
                 </div>
                 {% if form.username.errors %}
                     <p class="text-xs text-red-500 mt-1">{{ form.username.errors|first }}</p>
                 {% endif %}
             </div>
             <div>
                 <label for="{{ form.password.id_for_label }}" class="block text-sm font-medium text-gray-700">
                      {{ form.password.label }}
                 </label>
                 <div class="mt-1">
                      {% render_field form.password class+="form-input block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" required="True" autocomplete="current-password" %}
                 </div>
                  {% if form.password.errors %}
                     <p class="text-xs text-red-500 mt-1">{{ form.password.errors|first }}</p>
                 {% endif %}
             </div>
             <div class="pt-2">
                 <button type="submit" class="w-full flex justify-center py-2.5 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">      
                     {% translate 'Войти' %}
                 </button>
             </div>
        </form>
    </div>
</body>
</html>