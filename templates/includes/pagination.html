{# templates/includes/pagination.html #}
{% load i18n %}

{# 
   Этот шаблон принимает следующие переменные контекста:
   - page_obj: Объект страницы Paginator (обязательно).
   - paginator: Объект Paginator (опционально, используется для общего кол-ва).
   - is_paginated: Флаг наличия пагинации (опционально).
   - param_name: Имя GET-параметра для номера страницы (по умолчанию 'page').
#}
{% with current_page=page_obj.number total_pages=page_obj.paginator.num_pages page_param=param_name|default:'page' %}
<div class="flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0 text-sm w-full">

    {# Информация о текущей странице и общем количестве #}
    <span class="text-gray-600 dark:text-gray-400">
        {% blocktrans with page_num=current_page total_pages=total_pages %}Страница {{ page_num }} из {{ total_pages }}{% endblocktrans %}
        {% if page_obj.paginator.count %}
        <span class="ml-2">({% blocktrans with count=page_obj.paginator.count %}Всего: {{ count }}{% endblocktrans %})</span>
        {% endif %}
    </span>

    {# Навигация по страницам #}
    {% if total_pages > 1 %}
    <nav aria-label="Pagination">
        <ul class="inline-flex items-center -space-x-px shadow-sm rounded-md">
            {# Кнопка "Первая" #}
            <li>
                {% if page_obj.has_previous %}
                    <a href="?{{ page_param }}=1{% for key, value in request.GET.items %}{% if key != page_param %}&{{ key }}={{ value }}{% endif %}{% endfor %}"
                       class="px-3 py-2 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-dark-800 dark:border-dark-600 dark:text-gray-400 dark:hover:bg-dark-700 dark:hover:text-white transition-colors">
                        <span class="sr-only">{% trans "First" %}</span>
                        <i class="fas fa-angle-double-left"></i>
                    </a>
                {% else %}
                    <span class="cursor-not-allowed px-3 py-2 ml-0 leading-tight text-gray-300 bg-white border border-gray-300 rounded-l-lg dark:bg-dark-800 dark:border-dark-600 dark:text-gray-500">
                        <span class="sr-only">{% trans "First" %}</span>
                        <i class="fas fa-angle-double-left"></i>
                    </span>
                {% endif %}
            </li>

            {# Кнопка "Предыдущая" #}
            <li>
                 {% if page_obj.has_previous %}
                    <a href="?{{ page_param }}={{ page_obj.previous_page_number }}{% for key, value in request.GET.items %}{% if key != page_param %}&{{ key }}={{ value }}{% endif %}{% endfor %}"
                       class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-dark-800 dark:border-dark-600 dark:text-gray-400 dark:hover:bg-dark-700 dark:hover:text-white transition-colors">
                        <span class="sr-only">{% trans "Previous" %}</span>
                        <i class="fas fa-angle-left"></i>
                    </a>
                {% else %}
                    <span class="cursor-not-allowed px-3 py-2 leading-tight text-gray-300 bg-white border border-gray-300 dark:bg-dark-800 dark:border-dark-600 dark:text-gray-500">
                        <span class="sr-only">{% trans "Previous" %}</span>
                        <i class="fas fa-angle-left"></i>
                    </span>
                {% endif %}
            </li>

            {# Текущая страница (без ссылки) #}
            <li>
                <span aria-current="page" class="z-10 px-4 py-2 leading-tight text-blue-600 border border-blue-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:border-blue-500 dark:bg-blue-900/30 dark:text-blue-300 font-semibold">
                    {{ current_page }}
                </span>
            </li>

            {# Кнопка "Следующая" #}
            <li>
                 {% if page_obj.has_next %}
                    <a href="?{{ page_param }}={{ page_obj.next_page_number }}{% for key, value in request.GET.items %}{% if key != page_param %}&{{ key }}={{ value }}{% endif %}{% endfor %}"
                       class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-dark-800 dark:border-dark-600 dark:text-gray-400 dark:hover:bg-dark-700 dark:hover:text-white transition-colors">
                        <span class="sr-only">{% trans "Next" %}</span>
                        <i class="fas fa-angle-right"></i>
                    </a>
                {% else %}
                    <span class="cursor-not-allowed px-3 py-2 leading-tight text-gray-300 bg-white border border-gray-300 dark:bg-dark-800 dark:border-dark-600 dark:text-gray-500">
                         <span class="sr-only">{% trans "Next" %}</span>
                         <i class="fas fa-angle-right"></i>
                    </span>
                {% endif %}
            </li>

            {# Кнопка "Последняя" #}
            <li>
                 {% if page_obj.has_next %} {# Показываем только если есть следующая #}
                    <a href="?{{ page_param }}={{ total_pages }}{% for key, value in request.GET.items %}{% if key != page_param %}&{{ key }}={{ value }}{% endif %}{% endfor %}"
                       class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-dark-800 dark:border-dark-600 dark:text-gray-400 dark:hover:bg-dark-700 dark:hover:text-white transition-colors">
                        <span class="sr-only">{% trans "Last" %}</span>
                        <i class="fas fa-angle-double-right"></i>
                    </a>
                {% else %}
                     <span class="cursor-not-allowed px-3 py-2 leading-tight text-gray-300 bg-white border border-gray-300 rounded-r-lg dark:bg-dark-800 dark:border-dark-600 dark:text-gray-500">
                         <span class="sr-only">{% trans "Last" %}</span>
                         <i class="fas fa-angle-double-right"></i>
                    </span>
                {% endif %}
            </li>
        </ul>
    </nav>
    {% endif %} {# End if total_pages > 1 #}
</div>
{% endwith %}