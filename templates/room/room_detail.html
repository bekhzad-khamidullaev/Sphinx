{% extends "base.html" %}
{% load static i18n %}
{% load app_filters %} {# –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å —Ç–∞–∫–æ–π —Ñ–∞–π–ª —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –µ—Å–ª–∏ –Ω—É–∂–µ–Ω #}

{% block title %}{{ page_title }} | {% trans "–ß–∞—Ç" %}{% endblock %}

{% block head_extra %}
{{ block.super }}
{# –°—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞, –µ—Å–ª–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ #}
<link rel="stylesheet" href="{% static 'css/chat_room.css' %}">
<style>
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ —á–∞—Ç–∞ */
    #chat-messages-container::-webkit-scrollbar {
        width: 8px;
    }

    #chat-messages-container::-webkit-scrollbar-track {
        background: transparent;
    }

    #chat-messages-container::-webkit-scrollbar-thumb {
        background-color: theme('colors.gray.300');
        border-radius: 4px;
    }

    html.dark #chat-messages-container::-webkit-scrollbar-thumb {
        background-color: theme('colors.dark.600');
    }

    #chat-messages-container {
        scrollbar-width: thin;
        scrollbar-color: theme('colors.gray.300') transparent;
    }

    html.dark #chat-messages-container {
        scrollbar-color: theme('colors.dark.600') transparent;
    }

    /* –°–∫—Ä—ã—Ç–∏–µ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ –¥–ª—è input, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–π */
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
</style>
{% endblock %}

{# –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –±–ª–æ–∫ page_header, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π H1 –¥–ª—è —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã #}
{% block page_header %}{% endblock %}

{% block content %}
<div
    class="flex h-[calc(100vh-theme(space.16)-theme(space.10)-2px)] -mt-6 -mx-4 border-t border-gray-200 dark:border-dark-700">
    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –∫–æ–º–Ω–∞—Ç–∞–º–∏ (–¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞) -->
    <aside
        class="w-64 bg-white dark:bg-dark-800 border-r border-gray-200 dark:border-dark-700 flex-col hidden md:flex shrink-0">
        <div
            class="p-4 border-b border-gray-200 dark:border-dark-700 flex justify-between items-center sticky top-0 bg-white dark:bg-dark-800 z-10">
            <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100">{% trans "–ö–æ–º–Ω–∞—Ç—ã" %}</h2>
            <a href="{% url 'room:create_room' %}" title="{% trans '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É' %}"
                class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition">
                <i class="fas fa-plus"></i>
            </a>
        </div>
        <nav id="sidebar-room-list" class="flex-1 overflow-y-auto p-2 space-y-1">
            {# –¢–µ–∫—É—â–∞—è –∫–æ–º–Ω–∞—Ç–∞ –ø–µ—Ä–≤–æ–π #}
            {% include "room/partials/room_list_item_sidebar.html" with room_item=room current_room_slug=room.slug %}

            {% for r_item in rooms_for_sidebar %}
            {% include "room/partials/room_list_item_sidebar.html" with room_item=r_item current_room_slug=room.slug %}
            {% empty %}
            <p class="text-xs text-gray-500 dark:text-gray-400 p-3 text-center italic">{% trans "–ù–µ—Ç –¥—Ä—É–≥–∏—Ö –∫–æ–º–Ω–∞—Ç." %}
            </p>
            {% endfor %}
        </nav>
    </aside>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —á–∞—Ç–∞ -->
    <main class="flex-1 flex flex-col bg-gray-50 dark:bg-dark-900 overflow-hidden">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–æ–º–Ω–∞—Ç—ã -->
        <header
            class="p-3 md:p-4 border-b border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 shadow-sm flex-shrink-0">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <button id="open-sidebar-btn"
                        class="md:hidden mr-3 p-1.5 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="text-xl font-semibold text-gray-800 dark:text-gray-100 truncate pr-4"
                        title="{{ room.name }}">
                        # {{ room.name }}
                    </h1>
                </div>
                <div class="relative" x-data="{ open: false }">
                    <button @click="open = !open"
                        class="p-1.5 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full focus:outline-none"
                        title="{% trans '–î–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–º–Ω–∞—Ç–æ–π' %}">
                        <i class="fas fa-ellipsis-v"></i> {# –∏–ª–∏ fa-ellipsis-h #}
                    </button>
                    <div x-show="open" @click.outside="open = false"
                        x-transition:enter="transition ease-out duration-100"
                        x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100"
                        x-transition:leave="transition ease-in duration-75"
                        x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95"
                        class="absolute right-0 mt-1 w-56 bg-white dark:bg-dark-800 shadow-xl rounded-md border border-gray-200 dark:border-dark-600 z-30 overflow-hidden"
                        x-cloak>
                        <ul class="py-1 text-sm text-gray-700 dark:text-gray-300">
                            <li>
                                <button type="button" id="archive-room-btn" data-room-slug="{{ room.slug }}"
                                    data-room-name="{{ room.name|escapejs }}"
                                    class="w-full text-left flex items-center px-4 py-2.5 hover:bg-gray-100 dark:hover:bg-dark-700 text-red-600 dark:text-red-400">
                                    <i class="fas fa-archive w-4 mr-2.5"></i> {% trans "–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É" %}
                                </button>
                            </li>
                            {# –î—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è: –ø–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–µ—Å–ª–∏ —Å–æ–∑–¥–∞—Ç–µ–ª—å), –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å #}
                        </ul>
                    </div>
                </div>
            </div>
            <div id="online-users-panel" class="text-xs text-gray-500 dark:text-gray-400 mt-1.5 flex items-center">
                <span class="relative flex h-2.5 w-2.5 mr-1.5">
                    <span
                        class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-green-500"></span>
                </span>
                <span id="online-count" class="font-medium">0</span>&nbsp;{% trans "–≤ —Å–µ—Ç–∏" %}:
                <span id="online-list" class="ml-1.5 truncate italic">{% trans "–ó–∞–≥—Ä—É–∑–∫–∞..." %}</span>
            </div>
            <div id="typing-indicator-panel" class="text-xs text-gray-500 dark:text-gray-400 mt-1 h-4">
                {# –°—é–¥–∞ JS –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å "User is typing..." #}
            </div>
        </header>

        <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
        <div id="chat-messages-container" class="flex-1 overflow-y-auto p-3 md:p-4 space-y-4">
            <div id="older-messages-loader" class="text-center py-4 hidden">
                <button id="load-older-messages-btn"
                    class="text-sm text-indigo-600 dark:text-indigo-400 hover:underline">
                    <i class="fas fa-spinner fa-spin mr-1"></i> {% trans "–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è..." %}
                </button>
            </div>
            <div id="chat-messages-list">
                {% for message_obj in messages_list %} {# message_obj —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å Django messages #}
                {% include "room/partials/message_item.html" with msg=message_obj current_user_id=request.user.pk %}
                {% empty %}
                <p id="no-messages-placeholder" class="text-center text-gray-500 dark:text-gray-400 italic py-10">
                    {% trans "–°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç. –ù–∞—á–Ω–∏—Ç–µ –¥–∏–∞–ª–æ–≥!" %}
                </p>
                {% endfor %}
            </div>
            <div id="message-anchor"></div> {# –Ø–∫–æ—Ä—å –¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤–Ω–∏–∑ #}
        </div>

        <!-- –ü–æ–¥–≤–∞–ª —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞ -->
        <footer
            class="p-3 md:p-4 border-t border-gray-200 dark:border-dark-700 bg-white dark:bg-dark-800 flex-shrink-0">
            <!-- –û–±–ª–∞—Å—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–≤–µ—Ç–∞ -->
            <div id="reply-preview-area"
                class="mb-2 text-xs p-2 bg-gray-100 dark:bg-dark-700 rounded hidden border-l-4 border-indigo-500 dark:border-indigo-400">
                <div class="flex justify-between items-center">
                    <div class="truncate">
                        <span class="text-gray-600 dark:text-gray-300">{% trans "–û—Ç–≤–µ—Ç –Ω–∞:" %}</span>
                        <strong id="reply-preview-user" class="text-gray-800 dark:text-gray-100"></strong>:
                        <em id="reply-preview-text" class="italic text-gray-700 dark:text-gray-200"></em>
                    </div>
                    <button type="button" id="cancel-reply-btn"
                        class="ml-2 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-500 text-lg font-semibold leading-none p-1">&times;</button>
                </div>
                <input type="hidden" id="reply-message-id-hidden" value="">
            </div>

            <!-- –û–±–ª–∞—Å—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–∞ -->
            <div id="file-preview-area"
                class="mb-2 text-xs p-2 bg-gray-100 dark:bg-dark-700 rounded hidden items-center justify-between border-l-4 border-gray-400 dark:border-dark-500">
                <div class="flex items-center truncate">
                    <i class="fas fa-paperclip mr-2 text-gray-600 dark:text-gray-300"></i>
                    <span id="file-preview-name" class="font-medium text-gray-800 dark:text-gray-100"></span>
                    <span id="file-preview-size" class="ml-2 text-gray-500 dark:text-gray-400"></span>
                </div>
                <button type="button" id="remove-file-btn"
                    class="ml-2 text-red-500 hover:text-red-700 font-semibold p-1 leading-none">&times;</button>
            </div>

            <form id="chat-message-form" class="flex items-end space-x-2">
                <label for="chat-file-input-trigger"
                    class="flex-shrink-0 p-2.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 cursor-pointer text-gray-500 dark:text-gray-400 focus-within:ring-2 focus-within:ring-indigo-500"
                    title="{% trans '–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª' %}">
                    <i class="fas fa-paperclip"></i>
                    <input type="file" id="chat-file-input" class="hidden">
                </label>
                <div class="flex-1 relative">
                    <textarea id="chat-message-input" placeholder="{% trans '–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...' %}" rows="1"
                        class="form-textarea block w-full px-4 py-2 pr-12 border border-gray-300 dark:border-dark-600 rounded-2xl shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm dark:bg-dark-700 dark:text-gray-200 dark:placeholder-gray-500 resize-none overflow-y-auto hide-scrollbar"
                        style="max-height: 120px;" autocomplete="off"></textarea>
                    {# –ö–Ω–æ–ø–∫–∞ –¥–ª—è —ç–º–æ–¥–∑–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ #}
                    {# <button type="button" id="emoji-picker-btn"
                        class="absolute right-2 bottom-2 p-1.5 text-gray-400 hover:text-gray-600">üòä</button> #}
                </div>
                <button type="submit" id="chat-message-submit-btn"
                    class="flex-shrink-0 inline-flex items-center justify-center w-10 h-10 border border-transparent rounded-full shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-ios-blue dark:hover:bg-indigo-500 disabled:opacity-50"
                    title="{% trans '–û—Ç–ø—Ä–∞–≤–∏—Ç—å' %}" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </form>
        </footer>
    </main>
</div>

<!-- –ú–æ–±–∏–ª—å–Ω–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
<div id="mobile-sidebar" class="fixed inset-0 flex z-40 md:hidden hidden">
    <div id="mobile-sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-25"></div>
    <aside
        class="relative flex-1 flex flex-col max-w-xs w-full bg-white dark:bg-dark-800 border-r border-gray-200 dark:border-dark-700">
        <div class="absolute top-0 right-0 -mr-12 pt-2">
            <button id="close-sidebar-btn" type="button"
                class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                <span class="sr-only">{% trans "–ó–∞–∫—Ä—ã—Ç—å —Å–∞–π–¥–±–∞—Ä" %}</span>
                <i class="fas fa-times text-white"></i>
            </button>
        </div>
        <div
            class="p-4 border-b border-gray-200 dark:border-dark-700 flex justify-between items-center sticky top-0 bg-white dark:bg-dark-800 z-10">
            <h2 class="text-lg font-semibold">{% trans "–ö–æ–º–Ω–∞—Ç—ã" %}</h2>
            <a href="{% url 'room:create_room' %}" title="{% trans '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É' %}"
                class="text-indigo-600 dark:text-indigo-400 hover:text-indigo-500 p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-dark-700 transition"><i
                    class="fas fa-plus"></i></a>
        </div>
        <nav class="flex-1 overflow-y-auto p-2 space-y-1">
            {% include "room/partials/room_list_item_sidebar.html" with room_item=room current_room_slug=room.slug %}
            {% for r_item in rooms_for_sidebar %}
            {% include "room/partials/room_list_item_sidebar.html" with room_item=r_item current_room_slug=room.slug %}
            {% endfor %}
        </nav>
    </aside>
    <div class="flex-shrink-0 w-14"></div>{# Dummy to offset sidebar pushing content #}
</div>


{% endblock %}

{% block scripts %}
{{ block.super }}
<script>
    // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è JS —á–∞—Ç–∞
    window.chatConfig = {
        roomSlug: "{{ room.slug|escapejs }}",
        currentUserId: {{ request.user.pk }}, // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
        currentUsername: "{{ request.user.username|escapejs }}",
        // csrfToken: "{{ csrf_token }}", // –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–ª—è –∫–∞–∫–∏—Ö-—Ç–æ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤ –≤–Ω–µ —Ñ–æ—Ä–º
        initialMessagesCount: {{ messages_list|length }}, // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
        messagesPageSize: {{ chat_messages_page_size|default:50 }}, // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
        // –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è JS
        i18n: {
            loadOlderButton: "{% trans '–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ...' %}",
            loadingOlder: "{% trans '–ó–∞–≥—Ä—É–∑–∫–∞...' %}",
            noMoreMessages: "{% trans '–ë–æ–ª—å—à–µ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π.' %}",
            messageDeleted: "{% trans '–°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ' %}",
            fileNotAvailable: "{% trans '–§–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω' %}",
            confirmArchiveRoom: "{% trans '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É \"%s\"?' %}", // %s –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ –∏–º—è –∫–æ–º–Ω–∞—Ç—ã
            // ... –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–æ–∫–∏
            replyTo: "{% trans '–û—Ç–≤–µ—Ç –Ω–∞:' %}",
            file: "{% trans '[–§–∞–π–ª]' %}",
            edit: "{% trans '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å' %}",
            delete: "{% trans '–£–¥–∞–ª–∏—Ç—å' %}",
            edited: "{% trans '—Ä–µ–¥.' %}",
            reply: "{% trans '–û—Ç–≤–µ—Ç–∏—Ç—å' %}",
            react: "{% trans '–†–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å' %}",
            editMessagePrompt: "{% trans '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:' %}",
            confirmDeleteMessage: "{% trans '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ?' %}",
            reactPrompt: "{% trans '–í–≤–µ–¥–∏—Ç–µ —ç–º–æ–¥–∑–∏ –¥–ª—è —Ä–µ–∞–∫—Ü–∏–∏:' %}",
            serverError: "{% trans '–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞' %}",
            isTyping: "{% trans '–ø–µ—á–∞—Ç–∞–µ—Ç...' %}",
            areTyping: "{% trans '–ø–µ—á–∞—Ç–∞—é—Ç...' %}",
            andOthersAreTyping: "{% trans '–∏ –¥—Ä—É–≥–∏–µ –ø–µ—á–∞—Ç–∞—é—Ç...' %}",
            noOneOnline: "{% trans '–ù–∏–∫–æ–≥–æ –Ω–µ—Ç –≤ —Å–µ—Ç–∏' %}",
            andMore: "{% trans '–∏ –µ—â–µ' %}",
        }
    };

    // URL –¥–ª—è WebSocket
    // –ü—Ä–∏–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—É—Ç–∏ WebSocket
    function getWebSocketPath(type, slug = null) {
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        const host = window.location.host;
        if (type === 'chat' && slug) { return `${protocol}//${host}/ws/chat/${slug}/`; }
        // if (type === 'user_search') { return `${protocol}//${host}/ws/user_search/`; }
        console.warn(`Unknown WebSocket path type: ${type}`);
        return `${protocol}//${host}/ws/`; // Fallback
    }
    window.djangoWsPath = getWebSocketPath; // –°–¥–µ–ª–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ
</script>

<!-- Alpine.js (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–∞–∫ –≤ –≤–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ —Å dropdown) -->
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<!-- –û—Å–Ω–æ–≤–Ω–æ–π JS-—Ñ–∞–π–ª –¥–ª—è —á–∞—Ç–∞ -->
<script src="{% static 'js/chat_room.js' %}" defer></script>
<!-- JS –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ–º–Ω–∞—Ç–æ–π (–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥.) -->
<script src="{% static 'js/room_actions.js' %}" defer></script>
{% endblock %}