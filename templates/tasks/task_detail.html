{% extends 'detail_base.html' %}
{% load i18n %}

{% block detail_title %}
    {{ task.task_number }} - {{ task.campaign.name }}
{% endblock %}

{% block detail_actions %}
    <button
        hx-get="{% url 'tasks:task_update' task.pk %}"
        hx-target="#modal-container"
        class="ml-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
    >
        ✏️ {% trans 'Редактировать' %}
    </button>
    <a href="{% url 'tasks:task_list' %}" class="ml-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
        ↩️ {% trans 'Назад к списку' %}
    </a>
{% endblock %}

{% block detail_content %}
    <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg font-medium leading-6 text-gray-900">
            {% trans 'Информация о задаче' %}
        </h3>
        <p class="mt-1 max-w-2xl text-sm text-gray-500">
            {% trans 'Подробная информация о задаче' %} <strong>{{ task.task_number }}</strong>
        </p>
    </div>
    <div class="border-t border-gray-200 px-4 py-5 sm:p-6">
        <dl class="grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2">
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Кампания' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.campaign.name }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Статус' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.get_status_display }}
                </dd>
            </div>
            <div class="sm:col-span-2">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Описание' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.description }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Приоритет' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.get_priority_display }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Категория' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.category.name|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Подкатегория' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.subcategory.name|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Команда' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.team.name|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Исполнитель' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.assignee.username|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Крайний срок' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.deadline|date:"d.m.Y H:i"|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Дата начала' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.start_date|date:"d.m.Y H:i"|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Дата завершения' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.completion_date|date:"d.m.Y H:i"|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Оценка времени' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.estimated_time|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Создатель' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.created_by.username|default:"-" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Дата создания' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.created_at|date:"d.m.Y H:i" }}
                </dd>
            </div>
            <div class="sm:col-span-1">
                <dt class="text-sm font-medium text-gray-500">
                    {% trans 'Дата обновления' %}
                </dt>
                <dd class="mt-1 text-sm text-gray-900">
                    {{ task.updated_at|date:"d.m.Y H:i" }}
                </dd>
            </div>
        </dl>
    </div>
{% endblock %}
