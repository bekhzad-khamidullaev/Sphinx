{% extends 'base.html' %}
{% load static i18n app_filters %}

{% block title %}{% trans "Проекты" %}{% endblock %}

{% block list_title %}
<h1 class="h3 fw-bold">
    {% trans 'Проекты' %}
</h1>
{% endblock %}

{% block list_actions %}
<div class="ms-4">
    <a href="{% url 'tasks:project_create' %}" class="btn btn-primary">
        <i class="fas fa-plus me-2" aria-hidden="true"></i> {% trans 'Создать проект' %}
    </a>
</div>
{% endblock %}

{% block list_actions_mobile %}
<a href="{% url 'tasks:project_create' %}" class="flex-fill btn btn-primary">
    <i class="fas fa-plus me-2" aria-hidden="true"></i> {% trans 'Создать проект' %}
</a>
{% endblock %}

{% block list_content %}
<div class="mt-4 table-responsive">
    <table class="table table-striped">
        <thead>
            <tr class="text-muted">
                <th scope="col"><i class="fas fa-project-diagram me-1" aria-hidden="true"></i>{% trans 'Название проекта' %}</th>
                <th scope="col"><i class="far fa-calendar-alt me-1" aria-hidden="true"></i>{% trans 'Дата начала' %}</th>
                <th scope="col"><i class="fas fa-calendar-check me-1" aria-hidden="true"></i>{% trans 'Дата завершения' %}</th>
                <th scope="col" class="text-center"><i class="fas fa-tasks me-1" aria-hidden="true"></i>{% trans 'Задач' %}</th>
                <th scope="col" class="text-center"><i class="fas fa-cogs me-1" aria-hidden="true"></i>{% trans 'Действия' %}</th>
            </tr>
        </thead>
        <tbody>
            {% for project in object_list %}
            <tr id="project-row-{{ project.pk }}" class="align-middle">
                <td class="fw-medium"><a href="{{ project.get_absolute_url }}" class="link-primary">{{ project.name }}</a></td>
                <td>{{ project.start_date|date:"d.m.Y"|default:"-" }}</td>
                <td>{{ project.end_date|date:"d.m.Y"|default:"-" }}</td>
                <td class="text-center">{{ project.tasks.count }}</td>
                <td class="text-center">
                    <div class="btn-group" role="group">
                        <a href="{{ project.get_absolute_url }}" title="{% trans 'Просмотреть задачи' %}" class="btn btn-sm btn-outline-primary"><i class="fas fa-eye" aria-hidden="true"></i></a>
                        <a href="{% url 'tasks:project_update' pk=project.pk %}" title="{% trans 'Редактировать' %}" class="btn btn-sm btn-outline-secondary"><i class="fas fa-edit" aria-hidden="true"></i></a>
                        <a href="{% url 'tasks:project_delete' pk=project.pk %}" title="{% trans 'Удалить' %}" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash" aria-hidden="true"></i></a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="py-5 text-center text-muted">
                    <i class="fas fa-folder-open fa-3x mb-3 text-secondary" aria-hidden="true"></i><br>
                    {% trans 'Проекты не найдены.' %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% if is_paginated %}
<div class="mt-6">
    {% include "includes/pagination.html" with page_obj=page_obj %}
</div>
{% endif %}
{% endblock %}