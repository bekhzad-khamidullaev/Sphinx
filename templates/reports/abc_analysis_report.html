{# tasks/templates/tasks/reports/abc_analysis_report.html #}
{% extends "base.html" %}
{% load i18n admin_urls static %}

{% block coltype %}colM{% endblock %}
{% block bodyclass %}{{ block.super }} app-tasks model-task report-abc{% endblock %}

{% block content_title %}<h1>{{ page_title }}</h1>{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
› <a href="{% url 'admin:app_list' app_label='tasks' %}">{{ opts.app_config.verbose_name }}</a>
› <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
› {{ page_title }}
</div>
{% endblock %}

{% block content %}
<div id="content-main">
    <p class="mb-4 text-sm text-gray-600 dark:text-gray-400">
        {% trans "Группировка задач по приоритетам: A (Высокий), B (Средний), C (Низкий)." %}
    </p>
    <div class="module" id="changelist">
        <div class="results">
            <table id="result_list" class="w-full">
                <thead>
                <tr>
                    <th scope="col" class="sortable column-priority_group sorted ascending">
                       <div class="text"><span>{% trans 'Группа приоритета' %}</span></div><div class="sortoptions"><a href="#" class="sortremove" title="{% trans 'Remove from sorting' %}"></a></div><div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-total_tasks">
                       <div class="text"><span>{% trans 'Количество задач' %}</span></div><div class="clear"></div>
                    </th>
                </tr>
                </thead>
                <tbody>
                {% for item in tasks %} {# Используем tasks из контекста #}
                <tr class="{% cycle 'row1' 'row2' %}">
                    <td class="field-priority_group">
                        {% if item.priority_group == "A" %}<strong>{% trans "A (Высокий)" %}</strong>
                        {% elif item.priority_group == "B" %}{% trans "B (Средний)" %}
                        {% elif item.priority_group == "C" %}{% trans "C (Низкий)" %}
                        {% else %}{{ item.priority_group }}
                        {% endif %}
                    </td>
                    <td class="field-total_tasks number">{{ item.total_tasks }}</td>
                </tr>
                {% empty %}
                <tr class="empty-row"><td colspan="2">{% trans "Нет задач для анализа." %}</td></tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}