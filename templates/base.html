{% load static i18n %}
<!DOCTYPE html>
{# JS –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å 'dark' –∫–ª–∞—Å—Å –∑–¥–µ—Å—å #}
<html lang="{{ LANGUAGE_CODE }}" class="h-full">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Sphinx - Task Management System">
    <link rel="shortcut icon" href="{% static 'img/fav.png' %}" type="image/x-icon">

    {# --- –°—Ç–∏–ª–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã --- #}
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://unpkg.com">

    {# Tailwind CSS #}
    <script src="https://cdn.tailwindcss.com/"></script>
    <script>
        tailwind.config = { darkMode: 'class', theme: { extend: { colors: { dark: { 50: '#f9f9f9', 100: '#f2f2f2', 200: '#e5e5e5', 300: '#d1d1d1', 400: '#b3b3b3', 500: '#8e8e93', 600: '#636366', 700: '#48484a', 800: '#3a3a3c', 900: '#2c2c2e', 950: '#1c1c1e', }, ios: { blue: '#0a84ff', green: '#30d158', indigo: '#5e5ce6', orange: '#ff9f0a', pink: '#ff375f', purple: '#bf5af2', red: '#ff453a', teal: '#64d2ff', yellow: '#ffd60a', } } } } }
        // JS –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–º—ã –î–û –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
    </script>

    {# Font Awesome #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {# AlpineJS - –Ω—É–∂–µ–Ω –¥–ª—è –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é #}
    <script src="https://unpkg.com/alpinejs@3.14.9/dist/cdn.min.js" defer></script>
    {# Toastify CSS #}
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

    {# –í–∞—à–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ #}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    {# –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã #}
    <script src="{% static 'js/main.js' %}" defer></script> {# –î–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã –∏ —Ç.–¥. #}
    <script src="{% static 'js/search.js' %}" defer></script> {# –î–ª—è –ø–æ–∏—Å–∫–∞ #}
    <script src="{% static 'js/app_utils.js' %}" defer></script> {# –£—Ç–∏–ª–∏—Ç—ã, –≤–∫–ª—é—á–∞—è authenticatedFetch –∏ showNotification #}

    <title>{% block title %}{% endblock %} | Sphinx</title>
    {% block extrastyle %}{% endblock %} {# –î–æ–ø. —Å—Ç–∏–ª–∏ –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ #}
</head>
<body class="h-full bg-gray-50 dark:bg-dark-950 text-gray-900 dark:text-gray-100 flex flex-col"
      x-data="{ mobileMenuOpen: false }"> {# AlpineJS –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è #}

    {# –ü—Ä–µ–ª–æ–∞–¥–µ—Ä #}
    <div id="preloader" class="fixed inset-0 w-full h-full bg-white/95 dark:bg-dark-950/95 flex items-center justify-center z-[1001] transition-opacity duration-500">
        <div class="w-12 h-12 border-4 border-gray-200 dark:border-dark-700 border-l-ios-blue rounded-full animate-spin"></div>
    </div>

    {# –ö–Ω–æ–ø–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä) #}
    <button id="darkModeToggle" aria-label="Toggle dark mode" class="fixed bottom-20 right-4 z-50 w-12 h-12 rounded-full bg-white dark:bg-dark-800 shadow-lg flex items-center justify-center text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-dark-700 transition-all">
        <i class="fas fa-moon dark:hidden"></i><i class="fas fa-sun hidden dark:block"></i>
    </button>

    {# –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¢–û–õ–¨–ö–û –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π #}
    {% if user.is_authenticated %}
        {# –•–µ–¥–µ—Ä #}
        <header class="fixed w-full top-0 z-40 flex items-center justify-between bg-white/70 dark:bg-dark-800/70 backdrop-blur-lg px-4 py-2 shadow-md dark:shadow-dark-900/50"> {# –£–º–µ–Ω—å—à–µ–Ω py-2 #}
            {# –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –õ–æ–≥–æ –∏ –∫–Ω–æ–ø–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é #}
            <div class="flex items-center">
                <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden mr-3 p-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-full focus:outline-none" aria-label="Open menu" :aria-expanded="mobileMenuOpen">
                    <i class="fas fa-bars fa-lg"></i>
                </button>
                <a href="/" class="flex items-center" aria-label="Home">
                    <img src="{% static 'img/logo.png' %}" alt="Sphinx Logo" class="w-8 h-8 md:w-9 md:h-9"> {# –ù–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–µ–Ω –ª–æ–≥–æ –Ω–∞ –º–æ–±–∏–ª–∫–µ #}
                    <strong class="ml-2 text-teal-600 dark:text-ios-teal text-lg font-semibold hidden sm:inline-block">Sphinx</strong>
                </a>
                 {# --- –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ù–∞–≤–∏–≥–∞—Ü–∏—è –ü–ï–†–ï–ú–ï–©–ï–ù–ê —Å—é–¥–∞ --- #}
                 <nav class="hidden md:flex items-center space-x-2 ml-6"> {# –£–º–µ–Ω—å—à–µ–Ω space-x, –¥–æ–±–∞–≤–ª–µ–Ω ml-6 #}
                    {# –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–ª–∞—Å—Å—ã –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∫ —Å—Å—ã–ª–∫–∞–º-–∫–Ω–æ–ø–∫–∞–º #}
                    <a href="{% url 'tasks:category_list' %}" class="inline-flex items-center justify-center text-sm px-4 py-2 rounded-full shadow-sm bg-white dark:bg-dark-800 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors duration-200 border border-gray-200 dark:border-dark-700">
                        <i class="fas fa-folder mr-2 text-teal-500 dark:text-ios-teal"></i> {% trans '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏' %}
                    </a>
                    <a href="{% url 'tasks:task_list' %}" class="inline-flex items-center justify-center text-sm px-4 py-2 rounded-full shadow-sm bg-white dark:bg-dark-800 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors duration-200 border border-gray-200 dark:border-dark-700">
                        <i class="fas fa-tasks mr-2 text-blue-500 dark:text-ios-blue"></i> {% trans '–ó–∞–¥–∞—á–∏' %}
                    </a>
                    <a href="{% url 'tasks:project_list' %}" class="inline-flex items-center justify-center text-sm px-4 py-2 rounded-full shadow-sm bg-white dark:bg-dark-800 hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors duration-200 border border-gray-200 dark:border-dark-700">
                        <i class="fas fa-project-diagram mr-2 text-purple-500 dark:text-ios-purple"></i> {% trans '–ü—Ä–æ–µ–∫—Ç—ã' %}
                    </a>
                </nav>
                 {# --- –ö–û–ù–ï–¶ –ü–ï–†–ï–ú–ï–©–ï–ù–ò–Ø –ù–ê–í–ò–ì–ê–¶–ò–ò --- #}
            </div>

            {# --- –ò–ó–ú–ï–ù–ï–ù–ò–ï: –£–±—Ä–∞–Ω justify-center –∏–∑ —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ --- #}
            <div class="flex-1 flex items-center justify-end"> {# –¢–µ–ø–µ—Ä—å justify-end #}
                {# --- –ù–∞–≤–∏–≥–∞—Ü–∏—è –£–î–ê–õ–ï–ù–ê –æ—Ç—Å—é–¥–∞ --- #}

                {# –ë–ª–æ–∫ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π (–∏–∑ –¥–æ—á–µ—Ä–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤) #}
                {# –°–∞–º–∏ –∫–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∫–ª–∞—Å—Å—ã –¥–ª—è —Ñ–∏–∫—Å. —Ä–∞–∑–º–µ—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: inline-flex items-center justify-center px-4 py-2 ... #}
                <div id="list_actions" class="hidden md:flex items-center space-x-2 mr-4">
                    {% block list_actions %}{% endblock %}
                </div>

                {# –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –ü–æ–∏—Å–∫ –∏ –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è #}
                <div class="flex items-center space-x-3"> {# –£–º–µ–Ω—å—à–µ–Ω space-x #}
                    <div class="universal-search-container relative hidden lg:block">
                        <input type="search" id="universal-search-input" class="form-input w-40 lg:w-56 px-4 py-2 rounded-full bg-gray-100 dark:bg-dark-700 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-ios-blue text-sm border-transparent focus:border-transparent" placeholder="{% trans '–ü–æ–∏—Å–∫...' %}" aria-label="{% trans '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫' %}" autocomplete="off" data-suggestions-url="{% url 'tasks:search-suggestions-api' %}"> {# –£–º–µ–Ω—å—à–µ–Ω–∞ —à–∏—Ä–∏–Ω–∞ #}
                        <div id="universal-suggestions-box" class="absolute z-50 w-full mt-1 bg-white dark:bg-dark-800 rounded-lg shadow-lg max-h-80 overflow-y-auto hidden border border-gray-200 dark:border-dark-700"></div>
                    </div>

                    <div class="relative" x-data="{ userMenuOpen: false }">
                        <button @click="userMenuOpen = !userMenuOpen" class="flex items-center px-2 py-1 bg-gray-100 dark:bg-dark-700 rounded-full hover:bg-gray-200 dark:hover:bg-dark-600 transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-dark-800 focus:ring-blue-500 dark:focus:ring-ios-blue" aria-label="User menu" :aria-expanded="userMenuOpen"> {# –£–º–µ–Ω—å—à–µ–Ω—ã –ø–∞–¥–¥–∏–Ω–≥–∏ #}
                            <img class="w-7 h-7 rounded-full object-cover" src="{% if user.image %}{{ user.image.url }}{% else %}{% static 'img/user.svg' %}{% endif %}" alt="{% trans 'User profile photo' %}">
                            <span class="ml-2 text-gray-800 dark:text-gray-200 text-sm hidden md:inline-block">{{ user.get_short_name }}</span> {# –°–∫—Ä—ã—Ç–æ –Ω–∞ sm, –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ md #}
                            <i class="fas fa-chevron-down ml-1 text-xs text-gray-500 dark:text-gray-400 hidden md:inline-block"></i>
                        </button>
                        <div x-show="userMenuOpen" @click.outside="userMenuOpen = false" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-100" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="absolute right-0 mt-2 w-48 bg-white dark:bg-dark-800 shadow-xl dark:shadow-dark-900/50 rounded-xl border border-gray-200 dark:border-dark-700 origin-top-right z-50" x-cloak>
                            {# ... –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ... #}
                            <div class="py-1"> <a href="{% url 'user_profiles:profile_view' %}" class="block px-4 py-2 text-sm text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-dark-700">{% trans '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å' %}</a> {% if user.is_superuser %}<a href="/admin/" class="block px-4 py-2 text-sm text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-dark-700">{% trans '–ê–¥–º–∏–Ω–∫–∞' %}</a>{% endif %} <a href="{% url 'room:rooms' %}" class="block px-4 py-2 text-sm text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-dark-700">{% trans '–ß–∞—Ç—ã' %}</a> </div> <hr class="border-gray-200 dark:border-dark-600"> <div class="py-1"> <form method="post" action="{% url 'set_language' %}" class="px-4 py-2 text-sm"> {% csrf_token %} <label for="language-select-desktop" class="sr-only">{% trans "Language" %}</label> <select name="language" id="language-select-desktop" onchange="this.form.submit()" class="w-full text-gray-800 dark:text-gray-200 bg-transparent dark:bg-transparent border-0 focus:ring-0 p-0"> <option value="uz" {% if LANGUAGE_CODE == "uz" %}selected{% endif %}>üá∫üáø {% trans 'Uzbek' %}</option> <option value="ru" {% if LANGUAGE_CODE == "ru" %}selected{% endif %}>üá∑üá∫ {% trans '–†—É—Å—Å–∫–∏–π' %}</option> <option value="en" {% if LANGUAGE_CODE == "en" %}selected{% endif %}>üá¨üáß {% trans 'English' %}</option> </select> </form> </div> <hr class="border-gray-200 dark:border-dark-600"> <div class="py-1"> <a href="{% url 'user_profiles:logout' %}" class="block px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-dark-700"><i class="fas fa-sign-out-alt mr-2"></i>{% trans '–í—ã—Ö–æ–¥' %}</a> </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Mobile Menu Sidebar -->
        <div x-show="mobileMenuOpen" x-transition:enter="transition ease-in-out duration-300 transform" x-transition:enter-start="-translate-x-full" x-transition:enter-end="translate-x-0" x-transition:leave="transition ease-in-out duration-300 transform" x-transition:leave-start="translate-x-0" x-transition:leave-end="-translate-x-full" class="fixed inset-y-0 left-0 w-64 bg-white dark:bg-dark-800 shadow-lg z-[60] flex flex-col" @click.outside="mobileMenuOpen = false" x-cloak>
             <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-dark-700">
                <a href="/" class="flex items-center" aria-label="Home"><img src="{% static 'img/logo.png' %}" alt="Sphinx Logo" class="w-8 h-8"><strong class="ml-2 text-teal-600 dark:text-ios-teal text-md font-semibold">Sphinx</strong></a>
                <button @click="mobileMenuOpen = false" class="text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white"><i class="fas fa-times fa-lg"></i></button>
            </div>
            <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                <a href="{% url 'tasks:category_list' %}" class="flex items-center px-3 py-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"><i class="fas fa-folder w-5 mr-3 text-teal-500 dark:text-ios-teal"></i> {% trans '–ö–∞—Ç–µ–≥–æ—Ä–∏–∏' %}</a>
                <a href="{% url 'tasks:task_list' %}" class="flex items-center px-3 py-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"><i class="fas fa-tasks w-5 mr-3 text-blue-500 dark:text-ios-blue"></i> {% trans '–ó–∞–¥–∞—á–∏' %}</a>
                <a href="{% url 'tasks:project_list' %}" class="flex items-center px-3 py-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"><i class="fas fa-project-diagram w-5 mr-3 text-purple-500 dark:text-ios-purple"></i> {% trans '–ü—Ä–æ–µ–∫—Ç—ã' %}</a>
                <hr class="border-gray-200 dark:border-dark-600 my-2">
                 <div class="relative lg:hidden px-1 py-2">
                    <input type="search" id="mobile-search-input" class="form-control w-full px-4 py-2 rounded-full bg-gray-100 dark:bg-dark-700 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-ios-blue text-sm" placeholder="{% trans '–ü–æ–∏—Å–∫...' %}" aria-label="{% trans '–ü–æ–∏—Å–∫' %}">
                    <!-- Suggestions box for mobile can be added here if needed -->
                 </div>
                 <hr class="border-gray-200 dark:border-dark-600 my-2">
                <a href="#" class="flex items-center px-3 py-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"><i class="fas fa-user w-5 mr-3 text-gray-500"></i> {% trans '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å' %}</a>
                {% if user.is_superuser %}<a href="/admin/" class="flex items-center px-3 py-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"><i class="fas fa-cog w-5 mr-3 text-gray-500"></i> {% trans '–ê–¥–º–∏–Ω–∫–∞' %}</a>{% endif %}
                <a href="{% url 'room:rooms' %}" class="flex items-center px-3 py-2 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700"><i class="fas fa-comments w-5 mr-3 text-gray-500"></i> {% trans '–ß–∞—Ç—ã' %}</a>
            </nav>
            <div class="p-4 border-t border-gray-200 dark:border-dark-700 space-y-2">
                <form method="post" action="{% url 'set_language' %}" class="w-full">
                    {% csrf_token %}
                    <label for="language-select-mobile" class="sr-only">{% trans "Language" %}</label>
                    <select name="language" id="language-select-mobile" onchange="this.form.submit()" class="w-full text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-dark-700 rounded-md p-2 border border-gray-300 dark:border-dark-600 text-sm focus:ring-blue-500 focus:border-blue-500">
                        <option value="uz" {% if LANGUAGE_CODE == "uz" %}selected{% endif %}>üá∫üáø {% trans 'Uzbek' %}</option>
                        <option value="ru" {% if LANGUAGE_CODE == "ru" %}selected{% endif %}>üá∑üá∫ {% trans '–†—É—Å—Å–∫–∏–π' %}</option>
                        <option value="en" {% if LANGUAGE_CODE == "en" %}selected{% endif %}>üá¨üáß {% trans 'English' %}</option>
                    </select>
                </form>
                <a href="{% url 'user_profiles:logout' %}" class="block w-full text-center px-4 py-2 text-sm rounded-md text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-dark-700"><i class="fas fa-sign-out-alt mr-2"></i>{% trans '–í—ã—Ö–æ–¥' %}</a>
            </div>
        </div>

        {# –û–≤–µ—Ä–ª–µ–π –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é #}
        <div x-show="mobileMenuOpen" x-transition:enter="transition-opacity ease-linear duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-linear duration-300" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-black/30 dark:bg-black/50 z-50 md:hidden" @click="mobileMenuOpen = false" x-cloak></div>

        {# –ö–æ–Ω—Ç–µ–Ω—Ç #}
        <main id="main-content" class="flex-1 overflow-y-auto pt-20 pb-24 md:pt-16 md:pb-20 bg-gray-50 dark:bg-dark-950"> {# –î–æ–±–∞–≤–ª–µ–Ω ID #}
            <div class="container mx-auto px-4 py-6">
                <div class="mb-6 block md:hidden"> {# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º list_title –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö #}
                     {% block list_title %}{% endblock %}
                 </div>
                <div id="list_actions_mobile" class="md:hidden mb-4 flex flex-wrap gap-2">
                    {% block list_actions_mobile %}{% endblock %}
                </div>
                 {# –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ—á–µ—Ä–Ω–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ #}
                {% block list_content %}{% endblock %}
            </div>
        </main>

        {% else %}
         <div class="flex items-center justify-center min-h-screen">
            <p>{% trans "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É." %}</p>
        </div>
        {% endif %}

        {# –§—É—Ç–µ—Ä #}
        <footer class="fixed bottom-0 left-0 w-full bg-white/80 dark:bg-dark-800/80 backdrop-blur-lg border-t border-gray-200 dark:border-dark-700 shadow-lg px-4 py-2 md:px-6 md:py-2 flex flex-col md:flex-row md:items-center md:justify-between rounded-t-xl md:rounded-t-2xl z-30 text-xs md:text-sm"> {# –£–º–µ–Ω—å—à–µ–Ω py #}
            <span class="text-gray-600 dark:text-gray-400 text-center md:text-left mb-1 md:mb-0">¬© <span id="year"></span> <a href="/" class="hover:underline text-teal-600 dark:text-ios-teal font-medium">Sphinx‚Ñ¢</a>. {% trans 'All Rights Reserved' %}.</span> <ul class="flex flex-wrap items-center justify-center md:justify-end font-medium text-gray-600 dark:text-gray-400"> <li><a href="#" target="_blank" rel="noopener noreferrer" class="hover:text-teal-600 dark:hover:text-ios-teal transition-colors px-2">{% trans 'Privacy Policy' %}</a></li> </ul>
        </footer>

        {# –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω) #}
        <div id="loading-indicator" class="hidden fixed inset-0 bg-white/70 dark:bg-dark-900/70 flex justify-center items-center z-[999]">
            <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 dark:border-ios-blue"></div>
        </div>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>}
    {% block scripts %}{% endblock %}
</body>
</html>