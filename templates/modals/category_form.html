{% extends 'modals/modal_form_base.html' %}
{% load i18n app_filters %}

{% block modal_title %}
    {% if category %}✏️ {% trans 'Редактировать категорию' %}{% else %}➕ {% trans 'Добавить категорию' %}{% endif %}
{% endblock %}

{% block form_action %}
    {% if category %}{% url 'tasks:update_category' category.id %}{% else %}{% url 'tasks:create_category' %}{% endif %}
{% endblock %}

{% block form_target %} #category-list {% endblock %}
{% block form_swap %} beforeend {% endblock %}

{% block form_fields %}
    {% if form.errors %}
        <div class="bg-red-100 text-red-700 p-2 rounded-lg shadow text-sm">
            <strong>⚠️ {% trans "Ошибка!" %}</strong> {% trans "Пожалуйста, исправьте ошибки ниже." %}
        </div>
    {% endif %}

    <div class="grid grid-cols-2 gap-x-4 gap-y-2 w-full">
        {% for field in form %}
            <div class="col-span-2 sm:col-span-1 bg-gray-50 border border-gray-200 rounded-lg px-3 py-1.5 shadow focus-within:ring-2 focus-within:ring-blue-400 transition">
                <label for="{{ field.id_for_label }}" class="block text-xs font-semibold text-gray-600">{{ field.label }}</label>
                <div class="mt-0.5">
                    {{ field }}
                    {% if field.errors %}
                        <ul class="mt-0.5 text-xs text-red-500">
                            {% for error in field.errors %}
                                <li>⚠️ {{ error }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
