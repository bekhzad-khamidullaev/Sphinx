{% extends 'base.html' %}
{% block content %}
<div class="flex w-full h-[200px]">
    <!-- Left Column for Netping Device Details -->
    <div class="flex-1 overflow-auto h-[200px] w-1/3">
        <table class="text-left w-full h-full transition-all duration-300 ease-in-out shadow-md hover:shadow-lg">
            <!-- <thead> -->
                <!-- <tr>
                    <th class="capitalize px-2 py-1 border-r">Field</th>
                    <th class="capitalize px-2 py-1 border-r">Value</th>
                </tr> -->
            <!-- </thead> -->
            <tbody class="text-natural-700 font-sans shadow-lg">
                <tr>
                    <td class="border border-l-0 px-2 py-1">Hostname</td>
                    <td class="border border-l-0 px-2 py-1">{{ device.hostname }}</td>
                </tr>
                <tr>
                    <td class="border border-l-0 px-2 py-1">Location</td>
                    <td class="border border-l-0 px-2 py-1">{{ device.location }}</td>
                </tr>
                <tr>
                    <td class="border border-l-0 px-2 py-1">Device IP</td>
                    <td class="border border-l-0 px-2 py-1">{{ device.ip_address }}</td>
                </tr>
                <tr>
                    <td class="border border-l-0 px-2 py-1">Uptime</td>
                    <td class="border border-l-0 px-2 py-1">{{ device.uptime }}</td>
                </tr>
                <tr>
                    <td class="border border-l-0 px-2 py-1">Status</td>
                    <td class="border border-l-0 px-2 py-1 {% if device.status %} text-green-500{% else %}text-red-500{% endif %}">
                        {% if device.status %}Online <i class="fad fa-circle"></i>{% else %}Offline <i class="fa-solid fa-circle-exclamation"></i>{% endif %}
                    </td>
                </tr>
                <tr>
                    <td class="border border-l-0 px-2 py-1">Last Updated</td>
                    <td class="border border-l-0 px-2 py-1">{{ device.last_updated }}</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    {% if has_problems %}
    <!-- Right Column for Problems with Fixed Width -->
    <div class="w-2/3 bg-gray-100 overflow-auto px-2 h-[400px]">
        <h2 class="text-xl font-semibold">Problems</h2>
        {% include 'problems.html' %}
    </div>
    {% else %}
    <table class="w-2/3 text-left h-[200px]">
        <tbody>
            <tr>
                <th class="capitalize px-4 py-2 border-l-0 transition-all duration-300 ease-in-out shadow-md hover:shadow-lg">No accident yet</th>
            </tr>
        </tbody>
    </table>
    {% endif %}
</div>

<div class="p-2 w-full transition-all duration-300 ease-in-out shadow-md hover:shadow-lg">
    <h2 class="text-xl mt-4 font-semibold ">Sensors</h2>
    <table class="w-full text-left mt-4">
        <thead>
            <tr>
                <th class="capitalize px-2 py-1 border-r">Sensor Name</th>
                <th class="capitalize px-2 py-1 border-r">Type</th>
                <th class="capitalize px-2 py-1 border-r">Last Reading</th>
                <th class="capitalize px-2 py-1 border-r">Last Updated</th>
            </tr>
        </thead>
        <tbody class="text-natural-600">
            {% for sensor in device.sensor_set.all %}
            <tr>
                <td class="border border-l-0 px-2 py-1">{{ sensor.sensor_name }}</td>
                <td class="border border-l-0 px-2 py-1">{{ sensor.sensor_type }}</td>
                <td class="border border-l-0 px-2 py-1">{{ sensor.value_current }}</td>
                <td class="border border-l-0 px-2 py-1">{{ sensor.last_updated }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
